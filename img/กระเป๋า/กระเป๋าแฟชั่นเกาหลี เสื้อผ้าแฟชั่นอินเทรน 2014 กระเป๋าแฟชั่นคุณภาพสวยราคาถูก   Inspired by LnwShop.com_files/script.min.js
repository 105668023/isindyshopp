!function(s,l){function a(s){return"string"==typeof s?s.replace(/'/g,"&#39;").replace(/"/g,"&#34;"):null==s?"":s}function e(s){return"string"==typeof s?s.replace(/\</g,"&lt;").replace(/\>/g,"&gt;"):null==s?"":s}var o=new function(){var n=s.location.protocol,t=n+"//lnwmsg.com/jsonp/notifications?lnwmsg_jsonp=?",p=n+"//lnwmsg.com/jsonp/count_notifications?lnwmsg_jsonp=?",i=null,c={},r={is_login:!1},u=!1;this.loaded=!1,this.load=function(){"undefined"==typeof lnwbar_data||this.init(lnwbar_data)},this.init=function(s){"undefined"!=typeof s.webtype&&(i=s.webtype),"undefined"!=typeof s.is_mobile&&(u=s.is_mobile),"undefined"!=typeof s.user&&(r=s.user),"undefined"!=typeof s.wdata&&(c=s.wdata),u&&l("#lb").addClass("lnwbar_mobile"),d(),b(r),h(),this.loaded=!0},this.show_msg=function(){if(l("#lb").hasClass("show_MessagePopup"))l("#lb").removeClass("show_MessagePopup"),l(document).unbind("mouseup.lbMessage");else{var s={data:LNWACCOUNTS_COOKIE_DATA};l.getJSON(t,s,function(s){if(s.success){var a=s.notifications,o="";for(var n in a){var t=a[n],p="";switch(t.type){case"lnwshop/owner/webboard/topic":case"lnwshop/owner/webboard/post":case"lnwshop/user/webboard/post":p="chat";break;case"lnwshop/owner/contact_us":p="message";break;case"lnwshop/owner/product/discuss":case"lnwshop/owner/product/review":p="review";break;case"lnwshop/owner/payment":p="payment";break;case"lnwshop/user/order":case"lnwshop/owner/order":case"lnwshop/user/shipping":case"lnwshop/owner/shipping":p="order";break;case"lnwshop/owner/broadcast":p="broadcast"}var i="";"undefined"==typeof t.extra||null==t.extra||("string"==typeof t.extra?i=' href="'+l.parseJSON(t.extra).url+'"':"undefined"!=typeof t.extra.url&&(i=' href="'+t.extra.url+'"')),o+='<li status="'+t.status+'"><a'+i+'><i class="icon_notice in_'+p+'"></i><span class="txt">'+e(t.message)+"</span></a></li>"}""==o&&(o='<li style="width:150px;text-align: center;">- ไม่มีข้อความแจ้งเตือน -</li>'),l("#lbMessagePopup ul").html(o),l("#lb").addClass("show_MessagePopup"),l(document).bind("mouseup.lbMessage",function(s){0==l(s.target).closest("#lbMessage").length&&(l("#lb").removeClass("show_MessagePopup"),l(document).unbind("mouseup.lbMessage"))})}})}},this.count_msg=function(){var s={data:LNWACCOUNTS_COOKIE_DATA};l.getJSON(p,s,function(s){s.success&&0!=s.count?(l("#lbMessage .count").html(s.count),l("#lbMessage .lbletter.zero").removeClass("zero")):(l("#lbMessage .count").html("0"),l("#lbMessage .lbletter").addClass("zero"))})};var d=function(){var s="";s+='<ul>		<li><div id="lbLnw"><span class="ico"></span><span class="txt">LNW</span></div></li>		<li class="lbp"><a href="http://www.lnwshop.com" target="_blank" class="lbpa lnwshop'+("lnwshopweb"==i?" webtype":"")+'" rel="nofollow"><span class="txt">SHOP</span></a></li>		<li class="lbp"><a href="http://www.lnwmall.com" target="_blank" class="lbpa lnwmall'+("lnwmall"==i?" webtype":"")+'" rel="nofollow"><span class="txt">MALL</span></a></li>		<li class="lbp"><a href="http://www.lnwmarket.com" target="_blank" class="lbpa lnwmarket'+("lnwmarket"==i?" webtype":"")+'" rel="nofollow"><span class="txt">MARKET</span></a></li>		<li class="lbp"><a href="http://www.lnwpic.com" target="_blank" class="lbpa lnwpic'+("lnwpic"==i?" webtype":"")+'" rel="nofollow"><span class="txt">PIC</span></a></li>		<li class="lbp"><a href="http://blog.lnw.co.th" target="_blank" class="lbpa lnwblog" rel="nofollow"><span class="txt">BLOG</span></a></li>		</ul>',s+='<div id="lbProductPopup" class="lnwshop">		<div class="lblists">		<a class="lblist lnwshop" product="lnwshop" href="http://www.lnwshop.com" target="_blank"></a>		<a class="lblist lnwmall" product="lnwmall" href="http://www.lnwmall.com" target="_blank"></a>		<a class="lblist lnwmarket" product="lnwmarket" href="http://www.lnwmarket.com" target="_blank"></a>		<a class="lblist lnwpic" product="lnwpic" href="http://www.lnwpic.com" target="_blank"></a>		<a class="lblist bloglnw" product="bloglnw" href="http://blog.lnw.co.th" target="_blank"></a>		</div>		<div class="lbdetails">		<a class="lbdetail lnwshop" href="http://www.lnwshop.com" target="_blank"><div class="txt"><strong>LnwShop.com</strong> สร้างร้านค้าออนไลน์ฟรี ไม่มีค่าบริการายปี ไม่จำกัดจำนวนชิ้นสินค้า ระบบการตกแต่งร้านแนวใหม่ WYSIWYG เทมเพลทน่ารัก สวยงาม พร้อมระบบจัดการหลังร้านครบทุกฟังก์ชั่นการซื้อ-ขาย</div></a>		<a class="lbdetail lnwmall" href="http://www.lnwmall.com" target="_blank"><div class="txt"><strong>LnwMall.com</strong> ห้างสรรพสินค้าออนไลน์สุดชิค คัดเฉพาะสินค้าคุณภาพจากร้านค้าภายใน LnwShop สั่งซื้อง่ายแถมรับคะแนนคืนสูงสุด 2% เพื่อใช้เป็นส่วนลดในครั้งต่อไป พร้อมรับประกันได้รับสินค้าถึงมือ 100%</div></a>		<a class="lbdetail lnwmarket" href="http://www.lnwmarket.com" target="_blank"><div class="txt"><strong>LnwMarket.com</strong> ตลาดเทพช้อปปิ้งออนไลน์ แหล่งรวมสินค้าที่คุณชื่นชอบ ให้คุณช้อปปิ้งได้ง่ายกว่า ด้วยการแสดงผลแบบต่อเนื่อง ไม่ต้องคลิกลิงก์หน้าใหม่ แค่คุณเลื่อนเมาส์ สินค้าถัดไปก็จะแสดงผลต่อทันที</div></a>		<a class="lbdetail lnwpic" href="http://www.lnwpic.com" target="_blank"><div class="txt"><strong>LnwPic.com</strong> เก็บรูปภาพความประทับใจไว้ไม่ให้อยู่เพียงแต่ในความทรงจำ ฝากรูปกับ LnwPic แบบไม่มีจำกัด พร้อมแชร์ให้เพื่อนง่ายนิดเดียว</div></a>		<a class="lbdetail bloglnw" href="http://blog.lnw.co.th" target="_blank"><div class="txt"><strong>Blog.Lnw.co.th</strong> บล็อกรวบรวมบทความข่าว โปรโมชั่น และสาระน่ารู้ที่จะทำให้คุณรู้จัก Lnw มากกว่าเคย ร่วมสนุก และค้นหาสิ่งใหม่ๆไปกับบล็อกเทพ</div></a>		</div>		</div>',l("#lbProduct").html(s),l("#lbLnw").bind("click",function(){l("#lb").hasClass("show_ProductPopup")?(l("#lb").removeClass("show_ProductPopup"),l(document).unbind("mouseup.lbProduct")):(l("#lb").addClass("show_ProductPopup"),l(document).bind("mouseup.lbProduct",function(s){0==l(s.target).closest("#lbLnw").length&&(l("#lb").removeClass("show_ProductPopup"),l(document).unbind("mouseup.lbProduct"))}))}),l("#lbProductPopup .lblists .lblist").bind("mouseover",function(){var s=l(this).attr("product");l("#lbProductPopup").attr("class",s)})},b=function(){if("undefined"!=typeof r.is_login&&r.is_login){var s='<a class="lbuser"><span class="ico"></span><img src="'+r.avatar+'" width="20"><span class="txt">'+r.name+'</span><span style="clear:both;"></span></a>			<div id="lbMemberPopup" class="lbdd">			<ul>			<li class="memberSetting"><a href="'+r.manage_url+'" rel="nofollow"><i></i><span class="txt">ตั้งค่าบัญชี</span></a></li>			<li class="memberSignout"><a href="'+r.logout_url+'"><i></i><span class="txt">ออกจากระบบ</span></a></li>			</ul>			</div>';l("#lbMember").html(s);var s='<div id="lbMessage">			<a onclick="lnwbar.show_msg();" class="lbletter zero">			<ul>			<li><span class="ico"></span></li>			<li><span class="count">0</span></li>			</ul>			</a>			<div id="lbMessagePopup" class="lbdd">				<ul></ul>			</div>			</div>';l("#lbPanel").append(s),l("#lbMember .lbuser").bind("click",function(){l("#lb").hasClass("show_MemberPopup")?(l("#lb").removeClass("show_MemberPopup"),l(document).unbind("mouseup.lbMember")):(l("#lb").addClass("show_MemberPopup"),l(document).bind("mouseup.lbMember",function(s){0==l(s.target).closest("#lbMember .lbuser").length&&(l("#lb").removeClass("show_MemberPopup"),l(document).unbind("mouseup.lbMember"))}))}),o.count_msg()}},h=function(){function s(s){var a={};"undefined"!=typeof s.shopid&&(a.shop_id=s.shopid),l.lnwajax.run("favshop",!0,{type:"POST",url:c.fav_remove_url,data:a,dataType:"json",start:s.start,success:s.success})}function o(){var a=l(this).closest("li");s({shopid:a.attr("shopid"),start:function(){a.hasClass("favhere")&&l("#lbLnwShop .lbToogleFav").removeClass("saving").removeClass("added").attr("title","เพิ่มเข้าร้านโปรด"),a.remove()},success:function(){0==l("#lbFavShopPopup ul li").length&&l("#lbFavShopPopup ul").append('<li class="nofav"><span class="txt">ไม่มีร้านโปรด</span></li>')}})}switch(i){case"lnwshop":case"lnwshopweb":if("undefined"!=typeof r.is_login&&r.is_login){var n="";n+='<div id="lbLnwShop">',n+='<a class="lbMyShop" title="ร้านค้าของฉัน?>"><span class="ico"></span></a><div id="lbMyShopPopup" class="lbdd"><ul>',l.each(c.myshops,function(s,l){n+="<li"+("undefined"!=typeof WEBID&&l.id==WEBID?' class="myhere"':"")+'><a title="'+a(l.name)+'" href="'+l.url+'"><img src="'+l.avatar+'" width="20" class="ico" /><span class="txt">'+e(l.name)+"</span></a></li>"}),n+='<li class="newshop"><a href="http://www.lnwshop.com/openshop" target="_blank">- - เปิดร้านค้าใหม่ - -</a></li></ul></div>',n+='<a class="lbFavShop" title="ร้านโปรดของฉัน"><span class="ico"></span></a><div id="lbFavShopPopup" class="lbdd"><ul>';var t=!1;c.favshops.length>0?l.each(c.favshops,function(s,l){"undefined"!=typeof WEBID&&l.id==WEBID&&(t=!0),n+="<li"+("undefined"!=typeof WEBID&&l.id==WEBID?' class="favhere"':"")+' shopid="'+l.id+'"><span class="remove">ลบ</span><a title="'+a(l.name)+'" href="'+l.url+'"><img src="'+l.avatar+'" width="20" class="ico" /><span class="txt">'+e(l.name)+"</span></a></li>"}):n+='<li class="nofav"><span class="txt">ไม่มีร้านโปรด</span></li>',n+="</ul></div>","lnwshop"==i&&(n+='<a class="lbToogleFav'+(t?" added":"")+'" title="'+(t?"ออกจากร้านโปรด":"เพิ่มเข้าร้านโปรด")+'"><span class="ico"></span></a>'),n+="</div>",l("#lbPanel").append(n),l("#lbLnwShop .lbMyShop").bind("click",function(){l("#lb").hasClass("show_MyShopPopup")?(l("#lb").removeClass("show_MyShopPopup"),l(document).unbind("mouseup.lbMyShop")):(l("#lb").addClass("show_MyShopPopup"),l(document).bind("mouseup.lbMyShop",function(s){0==l(s.target).closest("#lbLnwShop .lbMyShop").length&&(l("#lb").removeClass("show_MyShopPopup"),l(document).unbind("mouseup.lbMyShop"))}))}),l("#lbLnwShop .lbFavShop").bind("click",function(){l("#lb").hasClass("show_FavShopPopup")?(l("#lb").removeClass("show_FavShopPopup"),l(document).unbind("mouseup.lbFavShop")):(l("#lb").addClass("show_FavShopPopup"),l(document).bind("mouseup.lbFavShop",function(s){0==l(s.target).closest("#lbLnwShop .lbFavShop").length&&(l("#lb").removeClass("show_FavShopPopup"),l(document).unbind("mouseup.lbFavShop"))}))}),l("#lbFavShopPopup li .remove").bind("click",o),l("#lbLnwShop .lbToogleFav").bind("click",function(){var n=l(this);n.hasClass("added")?s({start:function(){n.addClass("saving")},success:function(){n.removeClass("saving").removeClass("added").attr("title","เพิ่มเข้าร้านโปรด"),l("#lbFavShopPopup li.favhere").remove(),0==l("#lbFavShopPopup ul li").length&&l("#lbFavShopPopup ul").append('<li class="nofav"><span class="txt">ไม่มีร้านโปรด</span></li>')}}):l.lnwajax.run("favshop",!0,{type:"POST",url:c.fav_add_url,data:null,dataType:"json",start:function(){n.addClass("saving")},success:function(s){if(s.success){var t=s.data;n.removeClass("saving").addClass("added").attr("title","ออกจากร้านโปรด"),l("#lbFavShopPopup li.nofav").remove();var p=t.shop,i=l('<li class="favhere" shopid="'+p.id+'"><span class="remove">ลบ</span><a title="'+a(p.name)+'" href="'+p.url+'"><img src="'+p.avatar+'" width="20" class="ico" /><span class="txt">'+e(p.name)+"</span></a></li>").appendTo("#lbFavShopPopup ul");i.find(".remove").bind("click",o)}}})})}}}};"function"==typeof define&&define.amd?define(function(){return o}):"undefined"!=typeof module&&module.exports?module.exports=o:s.lnwbar=o}(window,jQuery);